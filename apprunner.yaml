version: 1.0
runtime: python311

build:
  commands:
    build:
      - pip3 install -r PPDApp/requirements.txt

run:
  runtime-version: 3.11.9
  pre-run:
    - chmod +x PPDApp/startup.sh
  command: sh PPDApp/startup.sh
  network:
    port: 8000
  env:
    DB_HOST: "{{resolve:secretsmanager:spb:SecretString:DB_HOST}}"
    DB_PORT: "5432"
    DB_NAME: "{{resolve:secretsmanager:spb:SecretString:DB_NAME}}"
    DB_USER: "{{resolve:secretsmanager:spb:SecretString:DB_USER}}"
    DB_PASSWORD: "{{resolve:secretsmanager:spb:SecretString:DB_PASSWORD}}"
    DJANGO_SUPERUSER_USERNAME: "{{resolve:secretsmanager:sps:SecretString:DJANGO_SUPERUSER_USERNAME}}"
    DJANGO_SUPERUSER_EMAIL: "{{resolve:secretsmanager:sps:SecretString:DJANGO_SUPERUSER_EMAIL}}"
    DJANGO_SUPERUSER_PASSWORD: "{{resolve:secretsmanager:sps:SecretString:DJANGO_SUPERUSER_PASSWORD}}"