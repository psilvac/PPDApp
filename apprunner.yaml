version: 1.0
runtime: python311

build:
  commands:
    build:
      - pip3 install -r PPDApp/requirements.txt

run:
  runtime-version: 3.11.9
  pre-run:
    - chmod +x PPDApp/startup.sh
  command: sh PPDApp/startup.sh
  network:
    port: 8000
  env:
    - name: DB_HOST
      value: "{{resolve:secretsmanager:spb:SecretString:DB_HOST}}"
    #- name: DB_PORT
    #  value: 5432
    - name: DB_NAME
      value: "{{resolve:secretsmanager:spb:SecretString:DB_NAME}}"
    - name: DB_USER
      value: "{{resolve:secretsmanager:spb:SecretString:DB_USER}}"
    - name: DB_PASSWORD
      value: "{{resolve:secretsmanager:spb:SecretString:DB_PASSWORD}}"
    - name: DJANGO_SUPERUSER_USERNAME
      value: "{{resolve:secretsmanager:sps:SecretString:DJANGO_SUPERUSER_USERNAME}}"
    - name: DJANGO_SUPERUSER_EMAIL
      value: "{{resolve:secretsmanager:sps:SecretString:DJANGO_SUPERUSER_EMAIL}}"
    - name: DJANGO_SUPERUSER_PASSWORD
      value: "{{resolve:secretsmanager:sps:SecretString:DJANGO_SUPERUSER_PASSWORD}}"